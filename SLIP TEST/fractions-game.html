<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞≤‡±Å ‡∞Ü‡∞ü ¬∑ mobile</title>
    <!-- Anek Telugu Font (clean on mobile) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anek+Telugu:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: #0a192f; /* navy */
            font-family: 'Anek Telugu', 'Segoe UI', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 10px;
            margin: 0;
        }
        .mobile-container {
            max-width: 480px;  /* typical mobile width */
            width: 100%;
            background: white;
            border-radius: 40px 40px 30px 30px;
            box-shadow: 0 20px 35px rgba(0,0,0,0.5);
            overflow: hidden;
            border-bottom: 6px solid #87CEEB;
        }

        /* header */
        .header {
            background: #0a192f;
            padding: 20px 16px 12px;
            color: white;
            text-align: center;
            border-bottom: 4px solid #87CEEB;
        }
        .header h1 {
            font-size: 1.9rem;
            line-height: 1.2;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        .header h1 span {
            display: block;
            font-size: 1.3rem;
            color: #b0e0ff;
            font-weight: 500;
        }
        .telugu-desc {
            font-size: 1.1rem;
            background: #1e3b5a;
            padding: 6px 12px;
            border-radius: 50px;
            margin-top: 10px;
            color: #e2f0ff;
            border: 1px solid skyblue;
        }

        /* student name row ‚Äî compact */
        .student-panel {
            background: #e6f3ff;
            padding: 14px 16px;
            border-bottom: 3px solid #0a192f;
        }
        .student-label {
            font-weight: 700;
            color: #0a192f;
            font-size: 1rem;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #studentNameInput {
            width: 100%;
            padding: 14px 18px;
            border: 3px solid #87CEEB;
            border-radius: 50px;
            font-size: 1.1rem;
            font-family: 'Anek Telugu', sans-serif;
            background: white;
            outline: none;
        }
        #studentNameInput:focus {
            border-color: #0a192f;
        }

        /* stats card */
        .stats-row {
            background: #b0e0ff;  /* light blue */
            padding: 12px 18px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            border-bottom: 3px solid navy;
        }
        .page-progress {
            background: #0a192f;
            color: white;
            padding: 7px 16px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .score-pill {
            background: navy;
            color: white;
            padding: 7px 16px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1rem;
            white-space: nowrap;
        }

        /* game area ‚Äì mobile optimized */
        .game-area {
            background: #f4fbff;
            padding: 16px 12px;
        }

        /* page header */
        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: white;
            padding: 10px 16px;
            border-radius: 60px;
            border: 2px solid navy;
            margin-bottom: 20px;
        }
        .page-title {
            color: navy;
            font-weight: 700;
            font-size: 1.2rem;
        }
        .page-badge {
            background: skyblue;
            color: navy;
            font-weight: 800;
            padding: 5px 18px;
            border-radius: 30px;
            font-size: 1.2rem;
        }

        /* matching columns ‚Äî stacked vertically on mobile */
        .match-stack {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        .column {
            background: white;
            border-radius: 35px;
            border: 3px solid navy;
            overflow: hidden;
        }
        .column-header {
            background: #0a192f;
            color: white;
            padding: 12px;
            font-weight: 700;
            font-size: 1.2rem;
            text-align: center;
            border-bottom: 3px solid skyblue;
        }
        .item-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px 12px;
        }
        /* touch-friendly cards */
        .fraction-card, .picture-card {
            background: #f0f9ff;
            border: 3px solid #87CEEB;
            border-radius: 28px;
            padding: 16px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 0 #0a192f;
            transition: all 0.1s ease;
            min-height: 85px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .fraction-card {
            font-size: 1.9rem;
            font-weight: 700;
            color: navy;
            flex-direction: column;
            line-height: 1.2;
        }
        .fraction-card .telugu-small {
            font-size: 1.1rem;
            font-weight: 500;
            color: #023b6d;
        }
        .picture-card {
            padding: 10px;
            justify-content: center;
        }
        .fraction-card.selected, .picture-card.selected {
            background: #0a192f;
            border-color: gold;
            color: white;
            transform: scale(1.01);
            box-shadow: 0 0 0 3px #ffe270, 0 5px 0 #001f3f;
        }
        .fraction-card.selected .telugu-small {
            color: #cce5ff;
        }
        .picture-card.selected svg circle, 
        .picture-card.selected svg path {
            filter: brightness(1.2);
            stroke-width: 3;
        }

        .fraction-card.matched, .picture-card.matched {
            opacity: 0.55;
            pointer-events: none;
            border-color: #145a32;
            background: #b0e57c;
            text-decoration: line-through 2px #0a192f;
        }
        .picture-card.matched svg {
            opacity: 0.7;
        }

        /* SVG visuals */
        .fraction-visual {
            width: 110px;
            height: 110px;
            max-width: 100%;
        }
        svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 3px 4px rgba(0,0,0,0.2));
        }

        /* message area */
        .message-bar {
            background: #e2f0ff;
            border-radius: 60px;
            padding: 15px 16px;
            margin: 18px 0 10px;
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            border: 3px solid navy;
            min-height: 4.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-word;
        }
        .success-msg {
            background: #d4edda;
            color: #0a4b1a;
            border-color: #28a745;
        }
        .error-msg {
            background: #f8d7da;
            color: #8b1e1e;
            border-color: #dc3545;
        }

        /* navigation buttons ‚Äî big and tappable */
        .nav-footer {
            background: #e6f3ff;
            padding: 16px 12px 20px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border-top: 4px solid skyblue;
        }
        .nav-btn {
            background: navy;
            border: none;
            color: white;
            font-family: 'Anek Telugu', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            padding: 16px 20px;
            border-radius: 40px;
            flex: 1 1 130px;
            min-width: 130px;
            box-shadow: 0 5px 0 #001a33;
            border-bottom: 3px solid #001a33;
            transition: 0.08s;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .nav-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #001a33;
        }
        .nav-btn:disabled {
            opacity: 0.35;
            transform: none;
            pointer-events: none;
            box-shadow: 0 3px 0 #333;
        }
        .reset-btn {
            background: #87CEEB;
            color: navy;
            border-bottom: 4px solid #3f91b0;
            box-shadow: 0 5px 0 #2b6c8a;
            flex: 1 1 160px;
        }
        .completion-area {
            background: #0a192f;
            color: white;
            border-radius: 40px;
            padding: 25px 16px;
            text-align: center;
            margin: 15px 0 5px;
            font-size: 1.5rem;
            font-weight: 700;
            border: 5px solid #87CEEB;
        }

        /* final touches */
        .attribution {
            text-align: center;
            color: #cce5ff;
            background: #0a192f;
            padding: 12px;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
<div class="mobile-container">
    <div class="header">
	<h1> ‡∞ï‡∞Ç‡∞¶‡±Å‡∞≤‡∞æ‡∞™‡±Å‡∞∞‡∞Ç ‡∞¨‡∞°‡∞ø </h1>
        <h1>‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞≤‡±Å ‡∞Ü‡∞ü <span>Fractions ¬∑ picture match</span></h1>
        <div class="telugu-desc">5 ‡∞™‡±á‡∞ú‡±Ä‡∞≤‡±Å ¬∑ 25 ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡±Å</div>
    </div>

    <div class="student-panel">
        <div class="student-label"><span>üë§</span> ‡∞Æ‡±Ä ‡∞™‡±á‡∞∞‡±Å / Name</div>
        <input type="text" id="studentNameInput" class="student-input" placeholder="e.g. ‡∞Æ‡∞≤‡±ç‡∞≤‡∞ø‡∞ï" autocomplete="off" value="‡∞™‡±ç‡∞∞‡∞ø‡∞Ø">
    </div>

    <div class="stats-row">
        <div class="page-progress" id="pageIndicatorMobile">‡∞™‡±Å‡∞ü 1/5</div>
        <div class="score-pill" id="scoreDisplayMobile">‚úÖ 0/25</div>
    </div>

    <div class="game-area" id="gameAreaMobile">
        <!-- dynamic JS rendering -->
    </div>

    <div class="nav-footer">
        <button class="nav-btn" id="prevBtnMobile">‚óÄ ‡∞Æ‡±Å‡∞®‡±Å‡∞™‡∞ü‡∞ø</button>
        <button class="nav-btn reset-btn" id="resetPageMobile">‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç</button>
        <button class="nav-btn" id="nextBtnMobile">‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§‡∞ø ‚ñ∂</button>
    </div>

    <div id="completionBlockMobile" class="completion-area" style="display: none;"></div>
    <div class="attribution">‡∞ï‡∞Ç‡∞¶‡±Å‡∞≤‡∞æ‡∞™‡±Å‡∞∞‡∞Ç ‡∞¨‡∞°‡∞ø ¬∑ mobile ‡∞µ‡±Ü‡∞∞‡±ç‡∞∑‡∞®‡±ç</div>
</div>

<script>
    (function() {
        // ----- FRACTION DATA (unchanged) -----
        const fractionData = [
            { fraction: "1/2", telugu: "‡∞Ö‡∞∞‡±ç‡∞ß‡∞Ç", numerator: 1, denominator: 2 },
            { fraction: "1/4", telugu: "‡∞™‡∞æ‡∞µ‡±Å", numerator: 1, denominator: 4 },
            { fraction: "3/4", telugu: "‡∞Æ‡±Ç‡∞°‡±Å ‡∞™‡∞æ‡∞µ‡±Å‡∞≤‡±Å", numerator: 3, denominator: 4 },
            { fraction: "1/3", telugu: "‡∞Æ‡±Ç‡∞°‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å", numerator: 1, denominator: 3 },
            { fraction: "2/3", telugu: "‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞Æ‡±Ç‡∞°‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 2, denominator: 3 },
            { fraction: "2/5", telugu: "‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞ê‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 2, denominator: 5 },
            { fraction: "3/5", telugu: "‡∞Æ‡±Ç‡∞°‡±Å ‡∞ê‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 3, denominator: 5 },
            { fraction: "4/5", telugu: "‡∞®‡∞æ‡∞≤‡±Å‡∞ó‡±Å ‡∞ê‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 4, denominator: 5 },
            { fraction: "1/6", telugu: "‡∞Ü‡∞∞‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å", numerator: 1, denominator: 6 },
            { fraction: "5/6", telugu: "‡∞ê‡∞¶‡±Å ‡∞Ü‡∞∞‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 5, denominator: 6 },
            { fraction: "1/8", telugu: "‡∞é‡∞®‡∞ø‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å", numerator: 1, denominator: 8 },
            { fraction: "3/8", telugu: "‡∞Æ‡±Ç‡∞°‡±Å ‡∞é‡∞®‡∞ø‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 3, denominator: 8 },
            { fraction: "5/8", telugu: "‡∞ê‡∞¶‡±Å ‡∞é‡∞®‡∞ø‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 5, denominator: 8 },
            { fraction: "7/8", telugu: "‡∞è‡∞°‡±Å ‡∞é‡∞®‡∞ø‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 7, denominator: 8 },
            { fraction: "2/8", telugu: "‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞é‡∞®‡∞ø‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 2, denominator: 8 },
            { fraction: "2/9", telugu: "‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞§‡±ä‡∞Æ‡±ç‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 2, denominator: 9 },
            { fraction: "4/9", telugu: "‡∞®‡∞æ‡∞≤‡±Å‡∞ó‡±Å ‡∞§‡±ä‡∞Æ‡±ç‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 4, denominator: 9 },
            { fraction: "7/9", telugu: "‡∞è‡∞°‡±Å ‡∞§‡±ä‡∞Æ‡±ç‡∞Æ‡∞ø‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 7, denominator: 9 },
            { fraction: "3/10", telugu: "‡∞Æ‡±Ç‡∞°‡±Å ‡∞™‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 3, denominator: 10 },
            { fraction: "7/10", telugu: "‡∞è‡∞°‡±Å ‡∞™‡∞¶‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 7, denominator: 10 },
            { fraction: "2/6", telugu: "‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞Ü‡∞∞‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 2, denominator: 6 },
            { fraction: "4/6", telugu: "‡∞®‡∞æ‡∞≤‡±Å‡∞ó‡±Å ‡∞Ü‡∞∞‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 4, denominator: 6 },
            { fraction: "3/7", telugu: "‡∞Æ‡±Ç‡∞°‡±Å ‡∞è‡∞°‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 3, denominator: 7 },
            { fraction: "5/7", telugu: "‡∞ê‡∞¶‡±Å ‡∞è‡∞°‡∞µ ‡∞µ‡∞Ç‡∞§‡±Å‡∞≤‡±Å", numerator: 5, denominator: 7 },
            { fraction: "2/4", telugu: "‡∞∏‡∞ó‡∞Ç (2/4)", numerator: 2, denominator: 4 }
        ];
        const WORDS_PER_PAGE = 5;
        const TOTAL_PAGES = 5;

        // state
        let currentPage = 0;
        let pageMatches = {};      // {0:[true,false...]}
        let selectedFractionIdx = null;
        let selectedPictureIdx = null;
        let messageTimeout = null;

        // initialize matches
        for (let p = 0; p < TOTAL_PAGES; p++) {
            if (!pageMatches[p]) pageMatches[p] = new Array(WORDS_PER_PAGE).fill(false);
        }

        // helpers
        function getStudentName() {
            const inp = document.getElementById('studentNameInput');
            return inp ? inp.value.trim() || '‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø' : '‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø';
        }

        function getCurrentPageFractions() {
            let start = currentPage * WORDS_PER_PAGE;
            return fractionData.slice(start, start + WORDS_PER_PAGE);
        }

        function getTotalMatchesCount() {
            return Object.values(pageMatches).flat().filter(Boolean).length;
        }

        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // SVG generator (same)
        function generateFractionSVG(num, den) {
            const angle = (2 * Math.PI) / den;
            const startAngle = -Math.PI / 2;
            let paths = [];
            for (let i = 0; i < num; i++) {
                const start = startAngle + i * angle;
                const end = startAngle + (i + 1) * angle;
                const x1 = 50 + 40 * Math.cos(start);
                const y1 = 50 + 40 * Math.sin(start);
                const x2 = 50 + 40 * Math.cos(end);
                const y2 = 50 + 40 * Math.sin(end);
                const largeArc = angle > Math.PI ? 1 : 0;
                paths.push(`<path d="M50,50 L${x1},${y1} A40,40 0 ${largeArc},1 ${x2},${y2} Z" fill="#e17055" opacity="0.8" stroke="#0a192f" stroke-width="2"/>`);
            }
            return `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="#ffeaa7" stroke="#0a192f" stroke-width="3"/>${paths.join('')}<text x="50" y="95" text-anchor="middle" fill="#0a192f" font-size="8" font-weight="bold">${num}/${den}</text></svg>`;
        }

        // display message
        function setMessage(text, type) {
            const msgDiv = document.getElementById('mobileMessage');
            if (!msgDiv) return;
            msgDiv.innerText = text;
            msgDiv.className = 'message-bar';
            if (type === 'success') msgDiv.classList.add('success-msg');
            else if (type === 'error') msgDiv.classList.add('error-msg');
            if (messageTimeout) clearTimeout(messageTimeout);
            if (text) {
                messageTimeout = setTimeout(() => {
                    if (msgDiv) { msgDiv.innerText = ''; msgDiv.className = 'message-bar'; }
                }, 1800);
            }
        }

        // completion check
        function checkGameCompleteMobile() {
            if (getTotalMatchesCount() === fractionData.length) {
                const name = getStudentName();
                const compDiv = document.getElementById('completionBlockMobile');
                compDiv.style.display = 'block';
                compDiv.innerHTML = `üéâ ‡∞Ö‡∞¶‡±ç‡∞≠‡±Å‡∞§‡∞Ç ${name}! ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞ó‡±Ü‡∞≤‡∞ø‡∞ö‡∞æ‡∞∞‡±Å!<br>‚ú® All 25 matched ‚ú®`;
            } else {
                document.getElementById('completionBlockMobile').style.display = 'none';
            }
        }

        // render page (mobile stacked layout)
        function renderMobilePage() {
            const container = document.getElementById('gameAreaMobile');
            const pageFractions = getCurrentPageFractions();
            const matches = pageMatches[currentPage] || new Array(WORDS_PER_PAGE).fill(false);

            // update stats
            document.getElementById('pageIndicatorMobile').innerText = `‡∞™‡±Å‡∞ü ${currentPage+1}/${TOTAL_PAGES}`;
            document.getElementById('scoreDisplayMobile').innerHTML = `‚úÖ ${getTotalMatchesCount()}/${fractionData.length}`;

            // navigation buttons
            document.getElementById('prevBtnMobile').disabled = (currentPage === 0);
            document.getElementById('nextBtnMobile').disabled = (currentPage === TOTAL_PAGES-1);

            // shuffle pictures for this page
            let picIndices = [...Array(WORDS_PER_PAGE).keys()];
            let shuffledPics = shuffleArray([...picIndices]);

            // build html
            let html = `
                <div class="page-header">
                    <span class="page-title">üìò ‡∞™‡±á‡∞ú‡±Ä ${currentPage+1}</span>
                    <span class="page-badge">${currentPage*WORDS_PER_PAGE+1}‚Äì${Math.min((currentPage+1)*WORDS_PER_PAGE, fractionData.length)}</span>
                </div>
                <div class="match-stack">
                    <!-- fractions column -->
                    <div class="column">
                        <div class="column-header">üîµ ‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞≤‡±Å</div>
                        <div class="item-grid" id="fractionColumn">
            `;
            // fractions
            pageFractions.forEach((f, idx) => {
                const matchedClass = matches[idx] ? 'matched' : '';
                const selectedClass = (selectedFractionIdx === idx && !matches[idx]) ? 'selected' : '';
                html += `<div class="fraction-card ${matchedClass} ${selectedClass}" data-frac-idx="${idx}" onclick="mobileSelectFraction(${idx})">
                    ${f.fraction} <span class="telugu-small">${f.telugu}</span>
                </div>`;
            });

            html += `</div></div><div class="column"><div class="column-header">üü† ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞æ‡∞≤‡±Å</div><div class="item-grid" id="pictureColumn">`;

            // pictures shuffled
            shuffledPics.forEach((origIdx) => {
                const f = pageFractions[origIdx];
                const matchedClass = matches[origIdx] ? 'matched' : '';
                const selectedClass = (selectedPictureIdx === origIdx && !matches[origIdx]) ? 'selected' : '';
                html += `<div class="picture-card ${matchedClass} ${selectedClass}" data-pic-idx="${origIdx}" onclick="mobileSelectPicture(${origIdx})">
                    <div class="fraction-visual">${generateFractionSVG(f.numerator, f.denominator)}</div>
                </div>`;
            });

            html += `</div></div></div>`;
            html += `<div class="message-bar" id="mobileMessage"></div>`;

            container.innerHTML = html;
        }

        // --- attach global functions (mobile) ---
        window.mobileSelectFraction = function(index) {
            const matches = pageMatches[currentPage];
            if (matches[index]) {
                setMessage('‡∞á‡∞™‡±ç‡∞™‡∞ü‡∞ø‡∞ï‡±á ‡∞ú‡∞§ ‡∞Ö‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø', 'error');
                return;
            }
            selectedFractionIdx = index;
            selectedPictureIdx = null;
            renderMobilePage();
        };

        window.mobileSelectPicture = function(index) {
            const matches = pageMatches[currentPage];
            if (matches[index]) {
                setMessage('‡∞à ‡∞¨‡±ä‡∞Æ‡±ç‡∞Æ ‡∞Æ‡±ç‡∞Ø‡∞æ‡∞ö‡±ç ‡∞Ö‡∞Ø‡∞ø‡∞™‡±ã‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø', 'error');
                return;
            }
            if (selectedFractionIdx === null) {
                setMessage('‡∞Æ‡±ä‡∞¶‡∞ü ‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø!', 'error');
                return;
            }
            if (selectedFractionIdx === index) {
                // correct match
                matches[selectedFractionIdx] = true;
                pageMatches[currentPage] = matches;
                setMessage('‚úÖ ‡∞∏‡∞∞‡±à‡∞® ‡∞ú‡±ã‡∞°‡±Ä!', 'success');
                selectedFractionIdx = null;
                selectedPictureIdx = null;
                renderMobilePage();
                checkGameCompleteMobile();
            } else {
                setMessage('‚ùå ‡∞§‡∞™‡±ç‡∞™‡±Å ‡∞ú‡±ã‡∞°‡±Ä, ‡∞Æ‡∞≥‡±ç‡∞≥‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø', 'error');
                selectedPictureIdx = null;  // deselect picture, keep fraction selected
                renderMobilePage();
            }
        };

        // navigation
        window.changePageMobile = function(delta) {
            let newPage = currentPage + delta;
            if (newPage >= 0 && newPage < TOTAL_PAGES) {
                currentPage = newPage;
                selectedFractionIdx = null;
                selectedPictureIdx = null;
                renderMobilePage();
            }
        };

        // reset current page
        window.resetCurrentPageMobile = function() {
            if (confirm('‡∞à ‡∞™‡±á‡∞ú‡±Ä ‡∞Æ‡±ç‡∞Ø‡∞æ‡∞ö‡±ç‚Äå‡∞≤‡∞®‡±Å ‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞æ?')) {
                pageMatches[currentPage] = new Array(WORDS_PER_PAGE).fill(false);
                selectedFractionIdx = null;
                selectedPictureIdx = null;
                renderMobilePage();
            }
        };

        // attach listeners
        document.getElementById('prevBtnMobile').addEventListener('click', () => changePageMobile(-1));
        document.getElementById('nextBtnMobile').addEventListener('click', () => changePageMobile(1));
        document.getElementById('resetPageMobile').addEventListener('click', resetCurrentPageMobile);

        // initial render
        renderMobilePage();
        checkGameCompleteMobile();

        // update completion on any external change
    })();
</script>
</body>
</html>
